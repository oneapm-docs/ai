# 关键事务－性能剖析

该页面为关键事务的性能剖析页面。主要包括性能剖析列表、添加按钮这 2 个部分。

**首先，什么是性能剖析?**<br>

* 性能剖析是 Ai 为用户提供的功能之一，用于分析关键事务。启动性能剖析，Ai 则开 始收集该事务的 100 个事务足迹和 1 个线程监控。通过事务足迹的研究和线程分析，可以 更好的确定在关键事务内部发生了什么，从而帮助用户获取关键事务的更多细节信息。

**性能剖析列表：**<br>

* 性能剖析列表中，展示出了关键事务的相关信息，包括进程、Trace 采集数、开始时间、状态;同时，在操作列，可以删除剖析记录。<br>
* 点击单条性能剖析记录，会跳转到单个记录页面。将在后面进行介绍。<br>
![](/images/aikeytransaction_profile01.png)

**添加按钮：**<br>

* 点击“添加”按钮，添加新的性能剖析。
![](/images/aikeytransaction_profile02.png)

* 点击单条性能剖析记录，可以跳转到单条性能剖析界面。该界面共有总览、 线程分析这两个部分。

**第 1 部分——总览**<br>

**总览列表：**<br>

* 列表中的耗时是每次采样到该事务时，根据 事务执行的耗时情况的排序。

**性能剖析信息：**<br>

* 显示了当前事务的名称、对应的应用程序性能 剖析开始时间、运行状态、采样次数。
![](/images/aikeytransaction_profile03.png)

**图表部分：**<br>

* 在 Trace 响应时间分布图中，根据采样的耗时情况进行分散排布。横坐标是耗时时长，纵坐标是抓 取到的次数。<br>
* 在响应时间和吞吐量图中，根据平均响应时间和吞吐量，分别绘制曲线图和柱形图——左侧的纵坐 标是响应时间，右侧的纵坐标是吞吐量。<br>
* 在 App Server Breakdown 图和 Breakdown Table 列表中，展示了慢事务的详细信息。<br>

**第 2 部分——线程分析**<br>

* 时间分布图详情：<br>

![](/images/aikeytransaction_profile04.jpg)

* 此处的百分比是根据在采样周期中，该行代码总计被采样到的次数与总采样次数的百分比，代码后括号中的内容是该代码在事务中的行数<br>

![](/images/aikeytransaction_profile05.jpg)

* 停到某个类的方法比如 Get 的方法，一般都是由于在进行密集计算，或者调用数据库但数据库长时间没有返回结果，或者数据库中有锁。<br>
* 如果是 CPU 慢，就会出现在这里；如果由于锁等原因，就会出现在县城和锁的标签中。<br>

![](/images/aikeytransaction_profile06.jpg)
